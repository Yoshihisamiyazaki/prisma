# 7.PRISMAプロセス

このセクションでは、PRISMAメソッドを使用して製品のリスクアセスメントを実施する際のプロセスに関して詳細に説明していきます。

図3：PRISMAプロセスの概要

PRISMAプロセスの中心テーマとしてはいわゆる製品リスクマトリックスの作成です。 前のセクションで説明したように、影響の大きさと欠陥の可能性からテストする各項目（リスク項目）に関する因子が決定されます。

影響の大きさと欠陥の可能性の両方に対して点数付けすることで、リスク項目に関して製品リスクマトリックスを作成することができます。

標準的ななリスクマトリックスは4つの領域（象限I、II、III、IV）に分かれており、それぞれ異なるリスクレベルとタイプを表現しています。

リスクレベル/タイプが異なれば、それぞれに対して異なるテストアプローチがテスト計画書に記載されるはずです。

図4：製品リスクマトリックス

PRISMAプロセスをサポートするために、フリーソフトウェアのサポートツールが開発されています。

このツールを使った例は、この本の後半部分で使われています（図5,6,8など）。

もし、すぐに製品の最悪の領域を見つけられたなら、それの領域に対してより多くテストができ、より多くの欠陥を発見できます。

重大な問題が多く見つかった場合、これはしばしばマネージャーにより多くの時間とリソースをテストに割くように動機づける事につながります。

## 7.1計画

### インプットとなるドキュメント（テストベース）の収集

構造された計画の段階は常に成功の鍵となります。

計画中に、インプットとなるドキュメント（テストベースと同じことを指すことが多い）を特定し、収集します。 もちろん、関連するドキュメントはリスク分析対象のテストレベルに大きく依存します。

ドキュメントが要求された品質レベルであることと、このプロセスで使用できる項目（テスト項目と呼ばれる）がちゃんと含まれていることを確認する必要があります。

このフェーズでの テストベースは「最終的である」または「受け入れ済みである」必要はないのですが、製品リスク分析に使用するのに十分安定している必要はあります。

ギャップ（例：要件）を特定し、ドキュメントオーナーに報告する必要があります。

もしテストベースが先述したレベルで利用可能でない場合は、製品リスク分析プロセスを継続する方法を考えたりとそもそもこのプロセスを続行するかどうかを検討する必要があります。

理想的には、ここでいう使用するドキュメントは、要件定義書（システムレベルでのテスト用）またはアーキテクチャを表したドキュメント（開発テスト用）を指します。

### リスク項目の特定

リスクアセスメントに使用される項目は、テストベースやリスク項目に基づいて識別されます。 リスクが想定される場合（例えば、ドキュメントのあいまい性に関連する項目等）、これらはドキュメント化されるべきです。

最も確度高くこれらを識別するには、ドキュメントオーナーやステークホルダーとミーティングしてインタービューをする必要があります。

経験則として、プロセスを現実的にすすめるためにはリスク項目はだいたい30〜35項目を超えない位がおすすめです。

つまり、ドキュメントに記載されている項目（要件など）を論理別な単位で分割し、グループ化する必要があります。

識別されたリスク項目は、階層構造で構成されます。

個別のリスク項目として要求ドキュメントに記載されているすべての要件を記載することは、あまり有益はありません。

テスト戦略に応じて、プロジェクトによっては、より高いレベルのリスク分析結果を入力として使用し、後工程でコンポーネントまたはサブシステムごとの基本要件を評価するために、個別のより詳細な製品リスク分析は後回しにすることを決定する場合があります。

識別されたリスク項目リストは、一意に識別され、プロジェクト全員が理解できるものでなければいけません。

各リスク項目は参照IDとして数字で表すことも構いませんが、プロジェクトで意味のあるコードまたは省略形で表現されることもあります。

リスク項目ごとに、可能であれば、テストベースの関連部分にリンクを貼る必要があります。

リスク項目一つ一つに一行の説明を追加する場合もあります。

プロジェクトメンバーにとって、この説明は、リスク項目を評価しなければならないという明確な動機を与える表現であるべきです。

### 影響度（障害が発生した場合の影響度）因子と尤度（障害が発生する可能性）因子を決定する

製品リスク分析では障害が発生する可能性ともし本番で発生した場合の影響度という2つの成分で分析します。

セクション5と6でこれらの2つの成分について議論したように、影響度や尤度に影響を与えるいくつかの因子を使用することをおすすめします。

テストマネージャーは、プロジェクトが尤度と影響の観点からリスク項目を評価するためにどの因子を使用するかを決定します。

テスト戦略において、リスク因子の標準セットは既に組織レベルで決定されているのが理想的です。

もちろん、プロジェクトによっては、テスト戦略で決めたリスク因子の標準セットから逸脱したものが存在する場合があります。

さらに、各因子は数値化されている必要があります。

さらに、これらの値は単なる数字ではなく '5個未満のインターフェース'、 '10個以上のインターフェース'などと意味のある説明で表示されることが好ましいでしょう。

可能であれば、値は客観的かつ測定可能な意味を持つ必要があります（例： 'medium size'という表現ではなく&lt;1 KLOCとか）。

しかしながら、現実的な運用上、1,2,3や1から5または0,1,3,5,9などの数値セットが使用されることが多いです。

まず手始めに適用するなら、最も簡単な方法、低（1）、中（2）、高（3）で表現するのも良いでしょう。

純粋にテストの観点だけを考えると、0,1,3,5,9の表現の方がベターです。なぜなら"9"が他の値と比較して明確に区別され、高いリスクであることをより明確に識別できるからです。

1,2,3や0,1,3,5,9など、どの数値セットを使うかは、プロジェクトレベルよりも組織レベル等高いレベルで事前に決定されていることが好ましいです。

### 各因子の重みを定義する

1つの因子2倍がより重要と考えられる場合、重み付けを使用することも可能です。

例えば、 ある因子は、別の因子よりも2倍の「価値」を持つと表現できます。

因子の重み付けは、テスト戦略で既に決定されている事が好ましいが、プロジェクト固有の目的に合わせて調整することもできます。

一般的な方法としては、重み付けを各因子に掛けて、システムの各領域に対して加重和を計算することです。 結果的に最も重要性が高い\(点数が高い\)領域に対して集中的にテストしてください！

選択したすべての因子に対して相対的な重み付けをかけ合わせます。

長く時間をかければ非常に厳密に計算できますが、 多くのケースで、重み付けは3つで十分です。

つまり重み付けの値として1,2,3のどれかを使います（1:そんなに重要ではない因子、2:中程度重要な因子、3:影響が強い因子などです。

プロジェクトを幾つか進めていくうちに履歴としてデータが蓄積されたなら、つけた重み付けを微調整することができます。

### ステークホルダーの選出

製品リスク分析に関与するステークホルダーが特定され、選出されます。

一般的に、ビジネスやプロジェクト内のいろんなロールで選出されます。

例としては、プロジェクトマネージャや開発者、ソフトウェアアーキテクト、マーケティング、エンドユーザ、ビジネスマネージャ、アプリケーションエンジニアなどです。

ステークホルダーの選出は重要なタスクであり、重要なステークホルダーを見逃せば、「関連するリスクが特定されていない」と彼に指摘されてしまいます。

理論的には、ステークホルダーは各々個別にどの因子が重要かという意見を持っていますが、実運用上は、ステークホルダーに関連する、すなわち彼の役割に関連する因子だけを彼にアサインすることが有益でしょう。

典型的には、ビジネス影響を及ぼす因子をビジネス担当者にアサインし、障害の可能性に関する因子は技術の専門家\(ソフトウェアアーキテクト、シニアエンジニア等\)にアサインすべきでしょう。

明らかに心理的要因が絡んでくるため（自分が関連する因子を重要度を上げたがる、ビジネス担当者はビジネスに関連する因子を重み付けしたくなる\)この段階では重み付けを使用しないルールにしましょう。

すなわち各ステークホルダーは同等に重要であると考えましょう。

各因子を少なくとも2人のステークホルダーにアサインすることは特におすすめです。

アサインを担当するテストマネージャは、次の点で良好なバランスを取る必要があります。

* テストレベルに応じて役割に適切な人を選択する。

* 影響度因子は「ビジネスロール」に、尤度因子は「技術ロール」に埋めてもらうようにする。

* 影響度因子と尤度因子の両方について、十分な知識を含んだ上、検討する。

### 採点ルール

最後にスコアリングプロセスに適用されるルールを設定しましょう。

リスク分析の一般的な落とし穴の1つは、結果がクラスター化してしまう傾向があることです。

つまり、結果は、すべてのリスク項目が互いに近い状態の2次元行列になってしまうことです\(すべての因子が最重要など\)。

これを効果的に防止するには、ステークホルダーにはすべての因子に対してフルレンジ\(1-3や0-9の値のすべてを使う事\)でスコアリングするようなルールとするのが良いでしょう。

このルールはPRISMAプロセスをサポートします。

ルールの例としては、「すべての値が使用されなければならない」、「すべての因子が採点されなければいけない」、「空白は許可されない」、「因子に割り当てられた値は均質な分布を取っていないといけない」等です。

---

> テスト実行の後半部分では、前半で欠陥が発見された領域に焦点を当て、さらに検出された欠陥と同じ種類を対象としたより多く、かつ深いテストを実行する必要があります。

---

> ドキュメントが要求された品質レベルであることと、このプロセスで使用できる項目（テスト項目と呼ばれる）がちゃんと含まれていることを確認する必要があります。
>
> このフェーズでの テストベースは「最終的である」または「受け入れ済みである」必要はないのですが、製品リスク分析に使用するのに十分安定している必要はあります。

## 7.2 キックオフ

任意プロセスではありますが、テストマネージャーはキックオフミーティングを開催して、全ステークホルダーにこのプロセスにおけるそれぞれの役割を説明する機会を設けられます。

任意ではあるのですが、キックオフミーティングは強くおすすめします。

なぜなら、キックオフミーティングを行ってしまえば、このプロセスにおいて、すべての参加者それぞれに対して期待される行動は明白になるはずです。

キックオフミーティングは、リスク項目、因子のリストを説明し、どの因子に重点を置く必要があるかを明確にするためにも利用されます。

リスク分析のキックオフ段階では、PRISMAプロセス、リスクベーステストのコンセプト、製品リスクマトリックスだけでなく、この活動の目的も明確化されます。

明確に説明することや共通の見解を作り出すことは、スムーズな運営とステークホルダーそれぞれのモチベーションアップに貢献します。

プロセスの有効性と期待される利益についての説明は、プロセスの後半ではなく、ここのキックオフで展開されるべきです。

ここで共有される項目は次のとおりです。 次のプロセスである個々の準備のやり方、使用するツールの説明、タイムスケジュールについて説明します。

テストマネージャーは、キックオフの後の残りのプロセスの概要も共有します。

ステークホルダーには、このフェーズの後半で開催されるコンセンサス会議において何を期待し、さらにプロセスの最後には何が起こるかを明確に説明すべきです。

テストマネージャーは、ステークホルダーに対して、このPRISMAプロセスの役割と貢献がプロジェクトのテストアプローチにどのような影響を与えるかを説明します。

リスク項目と因子については、ステークホルダーに採点を依頼する際に詳細に説明すべきです。

もちろんリスク項目、因子、採点スコアそのスコアそれぞれの正確な意味も、明確にして置く必要があります。

この採点で信頼できる結果を得るには、リスクアセスメントのすべての特性について共通の理解が必要です。

キックオフミーティングの終わりには、ステークホルダーからのコミットメントを得る必要であり、彼らが意欲的に参加することを促す必要があります。

## 7.3 個々の準備

このフェーズでは、参加者は、リスク項目の各因子にたいして値を割り当てます。

それぞれのリスク項目に関して対応する因子の予想されるリスクに対して、最も適した値を選択することによってスコア付けしていきます。

この手順は手動で行うこともできますが、スコアシートの自動チェックをサポートするExcelシートを提供することで、スムーズに行えるでしょう。

図5：参加者のスコアシートの例（PRISMAツールから）

ステークホルダーが記入した値は、予想されるリスクに基づいています。

つまり各ステークホルダーは何か不具合が生じる可能性がある（欠陥の可能性がある）、もしくは、ビジネスにとって重要なもの（欠陥の影響）を予想して採点しています。

予想されるリスクは、多くの場合、ステークホルダーの個人的な前提に基づいています。

これらの前提もドキュメント化する必要があります。

後で、コンセンサスミーティングにおいて、これらの前提は、スコアの比較、予期しない結果や外れ値を説明するのに非常に役立ちます。

例えば、なぜ私たちはこのようにスコアをつけたのですか？そして、私たちはもしかして異なる前提を持ってましたか？など。

それぞれの値を、テストマネージャが事前に決定したルールと照合していきます。

たとえば、選択した値は十分に分散されており、ステークホルダーにすべてアサイン済みの因子は得点を付けが完了しているかどうかなど。

特定の因子について採点する際には、可能な限り様々な値の間で（できるだけ）均等な分布になることが重要です。

これは、有益な製品リスク分析をするには不可欠です。

値のアサインは絶対値ではなく、相対値です。

例えばどの因子が最も頻繁に使用されるのかとか、最も複雑な因子かとかなど。

得点処理中に高い値と低い値の両方を使用することにより、より差別化されてスコアリングでき、これは後工程でより明白にテストの優先順位付けができます。

採点の例:

良い例\(均等な分布\):

| リスク項目 | 複雑度 |
| :--- | :--- |
| 001 | 低 |
| 002 | 高 |
| 003 | 中 |
| 004 | 低 |

悪い例\(不均等な分布:

| リスク項目 | 複雑度 |
| :--- | :--- |
| 001 | 高 |
| 002 | 高 |
| 003 | 中 |
| 004 | 高 |

表1：良いスコアリングの例と悪いスコアリングの例

もしこのフェーズを初めて行う場合、テストマネージャは、参加者に対してサポートを行います。 プロセス、ルール、場合によっては各因子を詳細に説明します。

## 7.4 スコアの収集

### エントリチェック

このフェーズではテストマネージャーはまず最初に、個々のスコアの採点中に得点が正しく行われたかどうかをチェックします。ルール違反がある場合は、テストマネージャーがこれに関して該当参加者とちゃんと話し合う必要があります。

おそらくこれが発生した場合の解決策として、因子や値の意味を明確にすべきか、もしくはいくつかの追加の前提を作り、ドキュメント化しなければいけないかもしれません。

テストマネージャーは、参加者が前提をドキュメント化しているかどうかも確認する必要があります。

必要に応じて、該当する参加者に対しては前フェーズの個別の準備を（部分的に）やり直してもらう必要があります。

各因子に対して少なくとも2つ以上の異なる得点がつけられていた場合、テストマネージャーが検査を行う必要があります。

ルール違反をステークホルダーとテストマネージャがどうしても解決できない場合は例として次のような対応をとることになります。

彼らは「得点の均等分配」が特定の因子に適用できないこと\(全部優先度高など\)を主張する場合、これはコンセンサスミーティングで議論の対象となります。

スコアの提出期限が近づいているとき、テストマネージャーはステークホルダー達に時間内にスコアを提出するようにリマインドすべきです。

期限内に提出しなかったステークホルダーに対しては、個別にアプローチしてください。

プロセスの次のフェーズに進むには、少なくともプロジェクトのステークホルダーまたは役割にアサインされた各グループからの代表的なスコアの提出がないといけません。

### 個々のスコアの処理

テストマネージャーは、個々のスコアを計算して分析します

平均値。彼はまた、コンセンサス会議で議論されるべき課題のリストを用意している。

各リスク項目について、可能性および影響が決定される。リスクごとのアイテム

尤度を決定する因子のスコアが合計され、別個に影響因子のスコアが加算される。

各リスク項目は、いわゆるリスクマトリクスに配置することができます。

コンセンサス会議で議論される課題リストの候補者はすべて未解決です

ルールの違反：

* ステークホルダーと一緒にテストマネージャーがルール違反をエスカレーションすることを決定したとき。

* すべての評価フォームの合計結果が未解決のリスク項目につながった場合。

因子に対するすべての割り当て値の分布が所定の閾値を超える場合、リスク項目は未解決として修飾される。ステークホルダーが最も高い値を割り当て、別のステークホルダーが特定のリスク項目に関する同じ要素の最小値を割り当てます。

* また、すべての象限が一緒になるリスクマトリクスの中心に近すぎるリスクアイテムも議論されるべきである。図のリスクマトリックスの例の円内

6.しきい値およびその他のルールは、計画フェーズ中にテストマネージャによって設定されたプロジェクトルールで決定されます。

---

> 使用する前に手動で出力をレビューする製品よりも、制御するプロセスに直接結合された製品が重要です。
>
> 製品がプロセスを管理する場合、このプロセス自体を分析する必要があります。
>
> リスクの追跡は、プロジェクト全体を通じて行う必要があります。
>
> これは、リスク分析の一部を定期的に繰り返すことによって、また初期リスク分析を評価することによって行うことができます

## 7.5コンセンサスミーティング

コンセンサス会議は、テストマネージャーが会議の目的を説明することから始まります。

この会合の最後に、（知覚される）製品リスクについて共通の理解が達成されるべきである。

最終的な結果は、ステークホルダーがコミットし、ルールセットを遵守するリスクマトリックスでなければなりません。

すべての得点に関するコンセンサスは必ずしも必要ではなく、時には不可能でさえある。

結局のところ、各参加者は、自分の背景と役割に応じて、特定のリスク項目の重要性に関する独自の関心と意見を持っています。

図6：リスクマトリクスの例（PRISMAツールから\)

会議中に、発行リストの項目がステークホルダーの間で議論されます

テストマネージャーは合意に達し、お互いの主張を理解することを目的としています。

議論は、文書化された仮定を使用して因子ごとのリスク項目ごとに行われます。

多くの場合、異なるスコアリングの要求元のソースの異なる理解。

これは明らかに明確ではないため、要件の変更要求につながるはずです。

ディスカッションの終わりに、最終スコアが決定され、結果のリスクマトリックスが提示される（図6参照）。

この結果得られるマトリックスは、ステークホルダーとともに常に検証されるべきです：

「マトリックスが期待どおりのものか、それとも驚くべき結果がありますか？」結果がステークホルダーの期待通りでない場合は、（再）検討する必要があります。

常識は常にあらゆる方法の一部でなければなりません。この方法を使いすぎると危険です。

会議の最後に、テストマネージャは結果を要約し、目的が達成されているかどうかをチェックします。

必要に応じて、フォローアップミーティングを開催することもできますし、小規模グループの特定のディスカッションミーティング（例：要件チームが提起された質問を処理したとき。

### 大規模プロジェクト：リスクマトリックスの拡大

1つのプロジェクト内で、いくつかのリスクマトリックスを作成することができます。例としては、

* 受け入れテストのマトリックスとサプライヤーテストのリスクマトリックス

* マスターテストプランレベルのマトリックスと特定のテストフェーズのマトリックス。

いくつかのリスクマトリックスが作成されるときはいつでも、それは一貫していなければなりません。より低いレベルのテスト計画のために、より高いレベルのテスト計画からマトリックスの部分を再利用することがしばしば可能である。

例えば、下位レベルのテスト計画のリスクマトリックスのステークホルダーを選択する場合、ビジネスリスク（インパクトファクター）を評価するステークホルダーを選択しないことが決定できます。

その代わり、ビジネスリスクは上位レベルのテストプランからコピーされます。一貫性は、複数のマトリックスに存在するリスク項目が同等のスコアを有することを意味する。

より高いレベルのテスト計画からのリスクマトリックスのリスク項目が、より低いレベルのリスクマトリックスのいくつかの項目に分割される場合、これらの項目の平均リスクスコアは、より高いリスク項目のスコアと同等でなければならないレベルの製品リスクマトリックス。

## 7.6差別化されたテスト手法の定義

リスクマトリクス内のテスト項目の位置に基づいて、すべてのテスト項目が優先されます。

その結果、すべてのテスト項目の順序が決定されます。最も重要な項目です。優先順位付けに加えて、試験項目の差別化された試験手法は、リスクマトリックスにおけるそれらの位置に基づいて定義される必要がある。テストアプローチには、通常、使用されるテストの深さとテストの優先順位の2つの主要な側面があります。

テスト深さは、異なるテスト設計技術、例えば、を使用して

リスクの高いテスト項目に対するデシジョン・テーブル手法と、低リスク・テスト項目に対する「等価パーティショニング」のみを使用します。試験の深さを変えることの問題は、

テスト設計手法の適用は、すべての（テスト）プロジェクトが一連のテスト設計手法を使用するのに十分なほど成熟しているわけではないということです。多くのテストプロジェクトは依然として要件に基づいてテストケースを作成し、テストデザインを実践しません。

異なるテスト設計手法を使用することに加えて、結果のリスクマトリクスに基づいて差別化されたアプローチを定義する代替方法があります。

差別化されたアプローチを定義するために適用できる考慮すべきプラクティス

静的テスト、テストデザインのレビュー、再テスト、回帰テスト、独立性のレベル、およびステートメントのカバレッジ目標などの終了基準を含みます。

また、リスクの高いアイテムは、経験を積んだエンジニアによってテストされ、リスクを軽減する別の方法です。

ここで言及したテストプラクティスと、それらを使用して差別化テストアプローチを定義する方法について考えてみましょう。

* 静的テスト:識別されたリスクに基づいて、より多くのレビューを行うことを選択することができます。危険性が高いと思われる分野の検査。

* テストデザインのレビュー:リスクの高い領域では、テスト設計（またはテストケース）をステークホルダーまたは他のテスターと見直すことができます。

* 再テスト:再テスト（確認テストとも呼ばれます）では、完全なテスト手順を再実行するか、故障した手順だけを再実行し、単独で解決された不具合を再テストするかを決定できます。

* 回帰テスト:もちろん、リスクアセスメントの結果も回帰テストを推進することができ、それによって、リグレッションテストセットでハイリスク領域を最も集中的にカバーする必要があります。

* 独立のレベル:1つのテスタにテストケースとテスト手順を定義させ、もう1つのテスタにテスト手順を実行させることができます。独立したテストエグゼキュータは、テストケースとその実行方法にとってより重要な傾向があり、その結果、より多くの欠陥が見つかる可能性が高くなります。コンポーネントテストの場合、2人のプログラマーがお互いのソフトウェアをテストするペアを作ることもできます。

* テストの終了基準:完了基準とも呼ばれる異なる終了基準を、異なるリスクレベルに使用することができます。リスクカバレッジの高い領域では、要件カバレッジまたはコードカバレッジ基準を厳格にする必要があります。

差別化に使用できる他の終了基準には、実行されたテストケースの割合、未処理の欠陥の数、および欠陥検出率が含まれます。

製品のリスクアセスメントの結果は、開発プロセスにも影響する可能性があることに注意してください。

開発プロセスで選択された選択肢は、残存製品リスク、特に欠陥の可能性に影響を及ぼすことがよくあります。

当初、リスクマトリクスの内容は、プロジェクトの初期段階での知覚されるリスクに基づいています。

プロジェクト中に、テストマネージャは、学習した教訓に基づいてマトリックスを維持しなければならない。 DDP（欠陥検出率）、（変更された）仮定、更新された要件またはアーキテクチャのような他の測定されたインジケータが含まれる。

プロジェクトの範囲、状況、要件の変更は、しばしばリスクアセスメントプロセスのステップの更新を必要とする。

したがって、リスクアセスメントプロセスは反復的になります。

---

> 一部の機能は毎日使用され、他の機能は数回使用されることがあります。
>
> いくつかの機能は、多くの人によって使用されることがあり、いくつかのユーザによって使用されることもあります。
>
> 頻繁に頻繁に使用される機能に優先順位を付けます。



